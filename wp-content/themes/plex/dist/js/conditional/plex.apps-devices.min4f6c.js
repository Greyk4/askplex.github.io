!function(e,t){"use strict";e(document).ready(function(){var s=null,n=t.location.hash,i=n.split("-"),a=null;if(i.length>1)try{new Foundation.Tabs(e("#app-devices-tabs")).selectTab(e(i[0]),{"data-deep-linking":!1})}catch(e){}var o={cache:{},request:{},abortRequest:function(){s&&4!==s.readyState&&(e(".field-spinner").hide(),s.abort())},outputPosts:function(t,s){var n=t.find(".latest-post");t.find(".field-spinner").hide(),s.length>0?e.each(s,function(e,t){var s=n.clone();s.find(".post-latest-date").text(moment(t.date).format("MMMM D, YYYY")),s.find(".post-latest-title").html(t.title.rendered),void 0!==t.excerpt&&s.find(".post-latest-excerpt").html(t.excerpt.rendered),s.find(".post-latest-url").attr("href",t.link),s.insertBefore(n).show()}):t.find(".devices-latest-posts-none").fadeIn(),t.addClass("content-loaded")},getPosts:function(t,n,i,a,c,d){void 0===o.request[c]&&(o.request[c]={}),void 0!==o.request[c][a]&&o.request[c][a]||(d.find(".field-spinner").show(),e.extend(i,{plex_cache:0,per_page:3}),o.request[c][a]=!0,s=e.ajax({type:"GET",url:t,data:i,headers:n,success:function(e){void 0===o.cache[c]&&(o.cache[c]={}),o.cache[c][a]=e,o.outputPosts(d,e)},error:function(e){console.log("Could not retrieve posts. Error: "+e.status)},complete:function(){o.request[c][a]=!1}},"json"))},recentPosts:function(e,t,s){var n=plex_l10n.apps_devices.recent_posts_endpoint,i={"X-WP-Nonce":plex_l10n.apps_devices.rest_token},a={categories:s};o.getPosts(n,i,a,"posts",t,e)},recentArticles:function(e,t,s){var n=plex_l10n.apps_devices.support_articles_endpoint,i={categories:s};o.getPosts(n,"",i,"articles",t,e)}};e(document).find("#app-devices-tabs").on("change.zf.tabs",function(t,s){e("html, body").animate({scrollTop:e("#my-media-sticky-nav").offset().top},500)}),e(document).on("closed",".remodal-devices",function(){o.abortRequest()}),e(document).on("opened",".remodal-devices",function(){var t=e(this);if(e(this).find('li[data-tab="latest-news"].is-active').length){var s=e(this).find('li[data-tab="latest-news"].is-active a').attr("href").substring(1);e("#"+s+":not(.content-loaded)").length&&e(this).find('li[data-tab="latest-news"].is-active a').trigger("change")}e(this).find("[data-tabs]").on("change.zf.tabs",function(s,n){var i=e(this).find(".tabs-title.is-active a").attr("href"),c=i.substring(1);if(a=t.find(i),void 0!==c){var d=a.find(".app-devices-categories").data();if(void 0!==d){var r=parseInt(d.categories)||0,l=d.device;a.find(".devices-latest-posts").show(),c.indexOf("latest-news")>=0?void 0!==o.cache[l]&&void 0!==o.cache[l].posts||o.recentPosts(a,l,r):c.indexOf("support-articles")>=0&&(void 0!==o.cache[l]&&void 0!==o.cache[l].articles||o.recentArticles(a,l,r))}else a.find(".devices-latest-posts-none").show()}})})})}(jQuery,window);