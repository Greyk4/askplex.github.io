!function(e,t){"use strict";var n={validOptions:["optOutPlayback","optOutLibraryStats"],init:function(){var t=e(".privacy-prefs-option"),i={"X-Plex-Client-Identifier":Plex.getClientIdentifier(),"X-Plex-Token":Plex.getAuthToken()};e.ajax({contentType:"application/x-www-form-urlencoded",dataType:"json",type:"GET",headers:i,url:PlexUtils.getAPIUrl()+"/api/v2/user/privacy",crossDomain:!0,success:function(i){e.each(n.validOptions,function(n,o){e("[data-option="+o+"]",t).prop("checked",!i[o])})},error:function(e,t,n){console.log("An error occurred while getting the privacy preferences: "+n)}})},optOut:function(t,i){var o={"X-Plex-Client-Identifier":Plex.getClientIdentifier(),"X-Plex-Token":Plex.getAuthToken()},r={};e.inArray(t,n.validOptions)<0||(r[t]=i,"optOutPlayback"===t&&(r.optOutLibraryStats=i),e.ajax({dataType:"json",type:"PUT",headers:o,data:r,url:PlexUtils.getAPIUrl()+"/api/v2/user/privacy",crossDomain:!0,success:function(e,t){},error:function(e,t,n){console.log("An error occurred while updating the privacy preferences: "+n)}}))}},i={validOptions:["adsConsent"],init:function(){var t=e(".privacy-prefs-option");PlexUser.getUser().then(function(n){e.each(i.validOptions,function(i,o){e("[data-option="+o+"]",t).prop("checked",n[o]&&null!==n[o])})})},optIn:function(t,n){var o={"X-Plex-Client-Identifier":Plex.getClientIdentifier(),"X-Plex-Token":Plex.getAuthToken()},r={};if(!(e.inArray(t,i.validOptions)<0)){var a=Plex.getAuthInfo();r.consent=n,e.ajax({dataType:"json",type:"PUT",headers:o,data:r,url:PlexUtils.getAPIUrl()+"/api/v2/user/"+a.uuid+"/settings/consent",crossDomain:!0,success:function(e,t){console.log(e),console.log(t)},error:function(e,t,n){console.log("An error occurred while updating the privacy preferences: "+n)}})}}};e(document).ready(function(){var t=e(".privacy-prefs-option"),o=e(".opt-out",t);e(document).on("click",o.selector,function(t){n.optOut(e(this).data("option"),e(this).is(":checked")?0:1),i.optIn(e(this).data("option"),e(this).is(":checked"))})}),PlexView.addAfterRenderHook(function(){Plex.isSignedIn()&&(n.init(),i.init())})}(jQuery,window);