"use strict";function _defineProperty(t,o,e){return o in t?Object.defineProperty(t,o,{value:e,enumerable:!0,configurable:!0,writable:!0}):t[o]=e,t}!function(t,o){Vue.use(VuePoll);for(var e={},s={_id:"",data:function(){return{voteHistory:{},voted:!1,vote:-1,endpoint:e.rest_api.endpoint,pollId:e.poll_id,postId:e.post_id,options:{question:e.question,answers:e.answers}}},methods:{addVote:function(t){console.log("You voted "+t.value+"!");var o=this,s=_defineProperty({headers:{},body:JSON.stringify({poll_id:this.pollId,post_id:this.postId,vote:t.value}),method:"POST"},"headers",{Accept:"application/json","Content-Type":"application/json"});s.headers["X-WP-Nonce"]=e.rest_api.nonce,fetch(this.endpoint,s).then(function(t){if(!t.ok)throw new Error("HTTP error! status: ${response.status}");return t.text()}).then(function(e){o.vote=t.value,o.setVoteHistory()}).catch(function(){console.error("Could not store vote. Please try again later.")})},setHasVoted:function(){this.voteHistory=this.getVoteHistory(),this.voted=void 0!==this.voteHistory[this.pollId],this.voted&&(this.vote=this.voteHistory[this.pollId])},getVoteHistory:function(){var t={};try{t=localStorage.getItem("plex_tv_wl_polls"),t&&(t=JSON.parse(t))}catch(o){console.warn("Your browser doesn't support local storage."),t=Cookies.getJSON("plex_tv_wl_polls")}return t&&void 0!==t?t:{}},setVoteHistory:function(){this.voteHistory[this.pollId]=this.vote;try{localStorage.setItem("plex_tv_wl_polls",JSON.stringify(this.voteHistory))}catch(t){console.warn("Your browser doesn't support local storage."),Cookies.set("plex_tv_wl_polls",this.voteHistory)}}},beforeMount:function(){this.setHasVoted(),this.voted&&(this.options.answers[this.vote].selected=!0,this.options.showResults=!0)},mounted:function(){}},i=document.getElementsByClassName("plex-v-poll"),n=0;n<i.length;n++)s.el="#"+i[n].id,e=plex_poll_l10n[i[n].id],new Vue(s)}(window);